"use strict";(self.webpackChunkmap_of_fame=self.webpackChunkmap_of_fame||[]).push([[45],{5754:(t,n,e)=>{e.d(n,{Z:()=>u,y:()=>s});var r=e(5861),a=e(4687),c=e.n(a),o=e(9515),u=function(){var t=(0,r.Z)(c().mark((function t(n,e){var r,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch((0,o.Kn)(n,e),{method:"GET"});case 2:return r=t.sent,t.next=5,r.json();case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}(),s=function(){var t=(0,r.Z)(c().mark((function t(n){var e,r,a,u,s,i,f;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.artist,r=n.crew,a=n.geoRect,u=n.year,s={geoRect:a,year:u},e&&(s.artist=e),r&&(s.crew=r),t.next=6,fetch((0,o.X7)(),{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}});case 6:return i=t.sent,t.next=9,i.json();case 9:return f=t.sent,t.abrupt("return",f);case 11:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},8846:(t,n,e)=>{e.d(n,{CP:()=>i,Dt:()=>u,ul:()=>s});var r=e(5861),a=e(4687),c=e.n(a),o=e(9515),u=function(){var t=(0,r.Z)(c().mark((function t(){var n,e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch((0,o.L6)(),{method:"GET"});case 2:return n=t.sent,t.next=5,n.json();case 5:return e=t.sent,t.abrupt("return",e);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=function(){var t=(0,r.Z)(c().mark((function t(){var n,e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch((0,o.hw)(),{method:"GET"});case 2:return n=t.sent,t.next=5,n.json();case 5:return e=t.sent,t.abrupt("return",e);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i=function(){var t=(0,r.Z)(c().mark((function t(){var n,e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch((0,o.En)(),{method:"GET"});case 2:return n=t.sent,t.next=5,n.json();case 5:return e=t.sent,t.abrupt("return",e);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},7739:(t,n,e)=>{e.d(n,{Ar:()=>l,C9:()=>w,Dj:()=>i,LM:()=>p,Ol:()=>h,P$:()=>m,T4:()=>s,pB:()=>v,rA:()=>d,zf:()=>f});var r=e(5861),a=e(4687),c=e.n(a),o=e(6897),u=e(9515),s=function(){var t=(0,r.Z)(c().mark((function t(n,e,r){var a,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch((0,u.Im)(n,e,r),{method:"GET"});case 2:return a=t.sent,t.next=5,a.json();case 5:return o=t.sent,t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(n,e,r){return t.apply(this,arguments)}}(),i=function(){var t=(0,r.Z)(c().mark((function t(n,e,r){var a,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch((0,u.Id)(n,e,r),{method:"GET"});case 2:return a=t.sent,t.next=5,a.json();case 5:return o=t.sent,t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(n,e,r){return t.apply(this,arguments)}}(),f=function(){var t=(0,r.Z)(c().mark((function t(n){var e,r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch((0,u.XD)(n),{method:"GET"});case 2:return e=t.sent,t.next=5,e.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),p=function(){var t=(0,r.Z)(c().mark((function t(n){var e,r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch((0,u.OL)(n),{method:"GET"});case 2:return e=t.sent,t.next=5,e.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),l=function(){var t=(0,r.Z)(c().mark((function t(n,e){var r,a,o,s,i,f,p,l,d,h,v,w,m,y,x;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.lat,a=e.lng,o=e.artistsCrews,s=e.year,i=e.spotStatus,f=e.img,p=e.videoLink,l=e.description,d=e.categoryId,h=e.firmId,v=e.link,w="Bearer ".concat(n),(m=new FormData).append("lat",r),m.append("lng",a),m.append("spot_status",i),m.append("img",f),m.append("category_id",d),null!=o&&o.length&&o.forEach((function(t,n){var e=t.artist,r=t.crew;(e||r)&&(m.append("artist_crew[".concat(n,"][artist]"),e),m.append("artist_crew[".concat(n,"][crew]"),r))})),s&&m.append("year",s),p&&m.append("video_link",p),l&&m.append("description",l),h&&m.append("firm_id",h),v&&m.append("link",v),t.next=16,fetch((0,u.FS)(),{method:"POST",withCredentials:!0,headers:{Authorization:w},body:m});case 16:return y=t.sent,t.next=19,y.json();case 19:return x=t.sent,t.abrupt("return",x);case 21:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}(),d=function(){var t=(0,r.Z)(c().mark((function t(n,e){var r,a,o,s,i,f;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.userId,a=e.message,o=e.reason,s=new FormData,r&&s.append("user_id",r),s.append("message",a),s.append("reason",o),t.next=7,fetch((0,u.yQ)(n),{method:"POST",body:s});case 7:return i=t.sent,t.next=10,i.json();case 10:return f=t.sent,t.abrupt("return",f);case 12:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}(),h=function(){var t=(0,r.Z)(c().mark((function t(n,e,r){var a,s,i,f,p,l,d,h,v;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.limit,s=void 0===a?o.hG:a,i=r.offset,f=void 0===i?0:i,p=r.year,l=void 0===p?null:p,d="Bearer ".concat(e),null!==n){t.next=8;break}return t.next=5,fetch((0,u.vF)(s,f,l),{method:"GET",withCredentials:!0,headers:{Authorization:d}});case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,fetch((0,u.z7)(n,s,f,l),{method:"GET"});case 10:t.t0=t.sent;case 11:return h=t.t0,t.next=14,h.json();case 14:return v=t.sent,t.abrupt("return",v);case 16:case"end":return t.stop()}}),t)})));return function(n,e,r){return t.apply(this,arguments)}}(),v=function(){var t=(0,r.Z)(c().mark((function t(n,e,r){var a,o,s,i,f,p,l,d,h,v,w,m;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.year,o=r.spotStatus,s=r.img,i=r.videoLink,f=r.description,p=r.categoryId,l=r.link,d=r.artistsCrews,h="Bearer ".concat(n),(v=new FormData).append("spot_status",o),v.append("category_id",p),v.append("year",a),s&&v.append("img",s),v.append("video_link",i),v.append("description",f),v.append("link",l),null!=d&&d.length&&d.forEach((function(t,n){var e=t.artist,r=t.crew;(e||r||1===d.length&&0===n)&&(v.append("artist_crew[".concat(n,"][artist]"),e),v.append("artist_crew[".concat(n,"][crew]"),r))})),t.next=13,fetch((0,u.XD)(e),{method:"POST",withCredentials:!0,headers:{Authorization:h},body:v});case 13:return w=t.sent,t.next=16,w.json();case 16:return m=t.sent,t.abrupt("return",m);case 18:case"end":return t.stop()}}),t)})));return function(n,e,r){return t.apply(this,arguments)}}(),w=function(){var t=(0,r.Z)(c().mark((function t(n,e){var r,a,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="Bearer ".concat(n),t.next=3,fetch((0,u.XD)(e),{method:"DELETE",withCredentials:!0,headers:{Authorization:r}});case 3:return a=t.sent,t.next=6,a.json();case 6:return o=t.sent,t.abrupt("return",o);case 8:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}(),m=function(){var t=(0,r.Z)(c().mark((function t(n){var e,r,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="Bearer ".concat(n),t.next=3,fetch((0,u.xk)(),{method:"GET",withCredentials:!0,headers:{Authorization:e}});case 3:return r=t.sent,t.next=6,r.json();case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},2859:(t,n,e)=>{e.d(n,{Ed:()=>h,Gw:()=>d,QB:()=>v,VI:()=>y,Xx:()=>w,ii:()=>m});var r,a=e(7844),c=e(5754),o=e(8846),u=e(7739),s=e(6897),i=e(8131),f=e(6130),p=e(6045),l=e(5146);i.Qi.subscribe((function(t){r=t}));var d=function(){return(0,o.Dt)().then((function(t){t.success&&t.result&&i.Xd.set((0,l.Y)(t.result))}))},h=function(){(0,o.CP)().then((function(t){var n=t.success,e=t.result;n&&e&&i.$.set(e)}))},v=function(){var t=(0,f.Pt)("token")||null,n=(0,f.Pt)("isKnownUser")||null;t&&(i.RR.set(!0),function(t){(0,a.fZ)(t).then((function(t){var n=t.success,e=t.result,r=t.errors;n&&e?(i.ZW.set(e),i.jl.set(!0),e.token&&(0,f.m8)("token",e.token)):Array.isArray(r)&&"Provided token is expired."===r[0]&&(0,f.bZ)("token"),i.RR.set(!1)})).catch((function(){(0,f.bZ)("token"),i.RR.set(!1)}))}(t)),n||i.M4.set(!0)},w=function(t){var n=(0,f.Pt)("railwayMode"),e=t,a=null;return r.length?(t===s.$0&&(e=""),n||(a=[1,3,4,5,6]),(0,u.T4)(e,r,a).then((function(t){var n=t.success,e=t.result;n&&e&&(i.Nx.set(!1),i.yg.set(!1),i.CM.set(e))}))):null},m=function(t){var n=t.artist,e=t.crew,r=t.year,a=t.geoRect,o=t.isInitial;(0,c.y)({year:r,artist:n,crew:e,geoRect:a}).then((function(t){var n=t.success,e=t.result,r=t.errors;o&&i.dk.set(!0),n&&e&&(i.Nx.set(!0),i.CM.set(e)),r&&!(0,f.xb)(r)&&p.f.update({clearParams:"all"})}))},y=function(){var t=null;(0,f.Pt)("railwayMode")||(t=[1,3,4,5,6]),(0,u.Dj)(7,r,t).then((function(t){var n=t.success,e=t.result;n&&e&&(i.Nx.set(!1),i.yg.set(!0),i.CM.set(e))}))}},8131:(t,n,e)=>{e.d(n,{$:()=>g,Bf:()=>w,CM:()=>m,DH:()=>L,H4:()=>p,Ir:()=>I,J9:()=>P,M4:()=>G,Nx:()=>y,Qi:()=>_,RR:()=>u,Tl:()=>l,Tw:()=>b,UI:()=>f,VX:()=>z,WO:()=>M,Wz:()=>R,Xd:()=>Z,ZW:()=>x,_l:()=>i,d0:()=>k,dk:()=>o,hg:()=>E,jl:()=>s,kE:()=>j,nK:()=>d,nN:()=>D,n_:()=>S,pJ:()=>h,sr:()=>v,vA:()=>A,wI:()=>C,yg:()=>T});var r=e(8261),a=e(6130),c=e(6897),o=(0,r.fZ)(!1),u=(0,r.fZ)(!1),s=(0,r.fZ)(!1),i=(0,r.fZ)(null),f=(0,r.fZ)(null),p=(0,r.fZ)(c.m6),l=(0,r.fZ)("".concat((0,a.H8)())),d=(0,r.fZ)(""),h=(0,r.fZ)(""),v=(0,r.fZ)(null),w=(0,r.fZ)({}),m=(0,r.fZ)({}),y=(0,r.fZ)(!1),x=(0,r.fZ)({}),b=(0,r.fZ)([]),Z=(0,r.fZ)([]),g=(0,r.fZ)([]),k=(0,r.fZ)([]),j=(0,r.fZ)([]),E=(0,r.fZ)(!1),T=(0,r.fZ)(!1),_=(0,r.fZ)([]),C=(0,r.fZ)(null),z=(0,r.fZ)(null),P=(0,r.fZ)({}),S=(0,r.fZ)(!1),L=(0,r.fZ)(!1),D=(0,r.fZ)(!1),I=(0,r.fZ)(!1),R=(0,r.fZ)(!1),G=(0,r.fZ)(!1),A=(0,r.fZ)(null),M=(0,r.fZ)(!1)},3418:(t,n,e)=>{e.d(n,{Y_:()=>s,_X:()=>o,rh:()=>i});var r=e(2982),a=e(6897),c=e(6130),o=function(t,n){for(var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],c=[a.$0].concat((0,r.Z)(e)),o=+t;o<=+n+1;o+=1)c.push("".concat(o));return c},u=function(t,n){for(var e=(0,r.Z)(t),a=+n;a<(0,c.H8)()+1;a+=1)e.push("".concat(a));return e},s=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return u(e,n).includes(t)},i=function(t){return t?[a.VW].concat((0,r.Z)(new Set(Object.values(t).map((function(t){return null===t?a.$0:t})).filter((function(t){return t})).sort((function(t,n){return(t===a.$0)-(n===a.$0)||-(t>n)||+(t<n)}))))):[]}},9530:(t,n,e)=>{e.d(n,{_Y:()=>b,l6:()=>Z,tL:()=>g});var r,a,c,o,u,s,i=e(5861),f=e(4687),p=e.n(f),l=e(6130),d=e(6045),h=e(8131),v=e(2859),w=e(6897);h.Tl.subscribe((function(t){r=t})),h.nK.subscribe((function(t){a=t})),h.pJ.subscribe((function(t){c=t})),h.Nx.subscribe((function(t){o=t})),h.DH.subscribe((function(t){u=t})),h.yg.subscribe((function(t){s=t}));var m=function(){return fetch("https://ipinfo.io/json?token=f7826cd7c9e44b").then((function(t){return t.json()})).then((function(t){return{center:t.loc.split(",").map((function(t){return+t})),zoom:11}}))},y=function(){var t=(0,i.Z)(p().mark((function t(){var n,e,r,a,c;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=d.f.getMapLocation())){t.next=3;break}return t.abrupt("return",n);case 3:if(!navigator.geolocation){t.next=15;break}return t.prev=4,t.next=7,new Promise((function(t,n){navigator.geolocation.getCurrentPosition(t,n)}));case 7:return e=t.sent,r=e.coords,a=r.latitude,c=r.longitude,t.abrupt("return",{center:[+a,+c],zoom:w.m6});case 12:return t.prev=12,t.t0=t.catch(4),t.abrupt("return",m());case 15:return t.abrupt("return",m());case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}(),x=function(t){var n=t.getBounds();return[n.getNorthWest(),n.getSouthEast()]},b=function(t){var n=x(t);h.Qi.set(n),s?(0,v.VI)():o||u||(0,v.Xx)(r)},Z=function(t){y().then((function(n){t.setView(n.center||w.cp.coordinates,n.zoom||w.m6)})).catch((function(){t.setView(w.cp.coordinates,w.cp.zoom)})).finally((function(){d.f.setup(t);var n=x(t),e=a||c;if(h.Qi.set(n),e){var o={artist:a,crew:c,isInitial:!0};r!==w.VW&&(o.year=r!==w.$0?r:""),(0,v.ii)(o)}else h.dk.set(!0),(0,v.Xx)(r||(0,l.H8)())}))},g=function(t){return Math.round(1e5*t)/1e5}},6045:(t,n,e)=>{e.d(n,{f:()=>y});var r=e(2982),a=e(8131),c=e(9530),o=e(3418),u=e(6897),s=!0,i=null,f=null,p={},l=null,d=null,h=null;a.Xd.subscribe((function(t){p=t})),a.Tl.subscribe((function(t){l=t})),a.nK.subscribe((function(t){d=t})),a.pJ.subscribe((function(t){h=t}));var v=function(t){var n=t.mapContainer,e=t.params,r=t.clearParams;if(s){var a=n||i,o=l,u=f||"",p=null==a?void 0:a.getCenter(),v=p&&(0,c.tL)(p.lat),w=p&&(0,c.tL)(p.lng),m=null==a?void 0:a.getZoom();if(e||d||h){var y=e?e.artist:d,x=e?e.crew:h;u="",y&&(u=u.concat("&artist=".concat(y))),x&&(u=u.concat("&crew=".concat(x))),f=u}"all"===r&&(f=null,u=""),r&&Array.isArray(r)&&f&&(u=new URLSearchParams(f.substring(1)),r.forEach((function(t){u.delete(t)})),u=u.toString()?"&".concat(u):"",f=u);var b="/?coords=".concat(v,",").concat(w,"&zoom=").concat(m,"&year=").concat(o).concat(u),Z={zoom:m,center:p,year:o,params:e};window.history.pushState(Z,"map",b)}else s=!0},w=function(t){return{year:t.get("year"),artist:t.get("artist"),crew:t.get("crew")}},m=function(t,n,e,r){var a="";r&&Object.keys(r).forEach((function(t){a=a.concat("&".concat(t,"=").concat(r[t]))}));var o=(0,c.tL)(t.lat),u=(0,c.tL)(t.lng);return"?coords=".concat(o,",").concat(u,"&zoom=").concat(n,"&year=").concat(e).concat(a)},y={getMapLocation:function(t,n){var e=t,c=n,s=window.location.search;if(s){var i=new URLSearchParams(s);c=i.get("coords").split(",").map((function(t){return parseFloat(t,10)})),e=+i.get("zoom"),function(t){var n,e=w(t),c=e.year,s=e.artist,i=e.crew,f=null!==(n=JSON.parse(p.additionalYears))&&void 0!==n?n:[],l=[].concat((0,r.Z)(f),[u.$0]);c&&(s||i)&&l.push(u.VW),c&&(0,o.Y_)(c,p.yearStart,l)&&a.Tl.set(c),s&&a.nK.set(s),i&&a.pJ.set(i)}(i)}return e||c?{zoom:e,center:c}:null},setup:function(t){s=!0,t.on("moveend",(function(){return v({mapContainer:t})})),i=t,window.addEventListener("popstate",(function(n){if(null!==n.state){var e=n.state,r=e.center,c=e.zoom,o=e.year,u=e.params;o&&u&&function(t,n){var e=n.artist,r=n.crew;a.Tl.set(t),e&&a.nK.set(e),r&&a.pJ.set(r)}(o,u),r&&c&&t.setView(r,c),s=!1}}))},update:v,set:function(t,n,e,r){var a={zoom:n,center:t,year:e,params:r};window.history.pushState(a,"map",m(t,n,e,r))},getCustomUrl:function(t,n,e,r){var a=window.location,c=a.origin,o=a.pathname,u=m(t,n,e,r);return"".concat(c).concat(o).concat(u)},getInviteUrl:function(t,n){var e=window.location.origin;return"".concat(e,"/registration?invite_code=").concat(t,"&from_user=").concat(n)},getDataFromParams:w}},5146:(t,n,e)=>{e.d(n,{Y:()=>r,e:()=>a});var r=function(t){var n={};return t.forEach((function(t){n[t.key]="boolean"!==t.type?t.value:"1"===t.value})),n},a=function(t){var n=[];return Object.keys(t).forEach((function(e){n.push({id:e,name:t[e]})})),n}}}]);