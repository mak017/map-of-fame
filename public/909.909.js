(self.webpackChunkmap_of_fame=self.webpackChunkmap_of_fame||[]).push([[909],{3909:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>$});var a=n(3144),i=n(5671),r=n(7326),o=n(9340),s=n(2963),c=n(1120),l=n(885),h=n(4234),d=n(5243),u=n.n(d),g=n(4861),m={leafletAreaSelectorControl:"_37qQG",leafletMapOverlayPane:"_39tTo",drawPaneHelp:"_2Ftyt",endSelectionArea:"_3Xj9O",areaSelectMarker:"_1h_hk",areaSelectGhostMarker:"_1KD2U _1h_hk"};function p(t,e){void 0===e&&(e="");var n=function(t){return t.split("-").map((function(t,e){return 0===e?t:""+t[0].toUpperCase()+t.substring(1)})).join("")}(t);return m[n]?e?m[n]+" "+t+" "+e:m[n]+" "+t:e?t+" "+e:t}function v(t,e,n){void 0===n&&(n=null);var a=n?e.add(n):e;t._leaflet_pos=a,d.Browser.any3d?d.DomUtil.setTransform(t,a):(t.style.left=a.x+"px",t.style.top=a.y+"px")}var f=d.Browser.mobile?"touchend":"click";function y(t){return t.isTrusted||window.Cypress}var k="area-draw-selection";function w(t){var e=t.getMap().getPane(k).querySelector(".end-selection-area");e&&e.remove()}function L(){return L=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},L.apply(this,arguments)}function b(t){t.originalEvent.preventDefault(),t.originalEvent.stopPropagation()}function P(t){var e=this;if(!this.mapMoving){var n=this.getMap(),a=t.clientX,i=t.clientY;if(void 0===a&&void 0===i){var r=t.changedTouches[0];a=r.clientX,i=r.clientY}if(this.rectDrawing&&null!==this.rectDrawEnd)n.fire("as:dragging-rect-end");else{var o=t.index,s=void 0===o?null:o,c=n.getContainer().getBoundingClientRect(),l=a-c.left,h=i-c.top;0===this.markers.length&&function(t,e){var n=e[0],a=e[1],i=t.getMap(),r=i.getPane(k),o=d.DomUtil.create("div",p("end-selection-area"),r),s=o.getBoundingClientRect();o.setAttribute("role","button"),o.addEventListener(f,(function(t){y(t)&&(t.stopPropagation(),i.fire("as:creation-end"))}),{once:!0}),o.addEventListener("mouseenter",t.hoverClosePoint.bind(t)),o.addEventListener("mouseleave",t.outClosePoint.bind(t)),v(o,new d.Point(n,a),new d.Point(-s.width/2,-s.height/2))}(this,[l,h]);var u=new d.Point(l,h),g=new d.DivIcon({className:p("area-select-marker"),iconSize:[16,16]}),m=new d.Marker(n.containerPointToLatLng(u),{icon:g,draggable:!0}),w=x.bind(this);m.on("drag",w(null===s?this.markers.length:s)),m.on("dragstart",(function(t){t.target.getElement().classList.add("active")})),m.on("dragend",(function(t){t.target.getElement().classList.remove("active"),requestAnimationFrame((function(){e.onPolygonReady()}))}));var P,M={marker:m,index:s};if(m.on("dblclick",(P=this.markers.length,function(t){t.originalEvent.stopPropagation(),n.fire("as:marker-remove",L({},M,{index:null===s?P:s}))})),m.on(f,b),m.addTo(n),n.fire("as:marker-add",M),null!==s)for(var D=function(t){e.markers[t].marker.off("drag"),e.markers[t].marker.on("drag",w(t)),e.markers[t].marker.off(f),e.markers[t].marker.on(f,b),e.markers[t].marker.off("dblclick"),e.markers[t].marker.on("dblclick",(function(a){n.fire("as:marker-remove",L({},e.markers[t],{index:t}))}))},_=s+1;_<this.markers.length;_++)D(_)}}}function M(t){var e=t.index,n=void 0===e?null:e,a=function(t,e){if(null==t)return{};var n,a,i={},r=Object.keys(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,["index"]),i=this.getMap(),r={marker:a.marker},o=this.markers;null===n?o.push(r):o.splice(n,0,r);var s=o.length>=3;"draw"===this.phase&&(s?3===o.length&&o.forEach((function(t,e){var n=t.marker,a=n.getIcon();a.options.className=p("area-select-marker",0===e?"start-marker":null),n.setIcon(a)})):o.forEach((function(t){var e=t.marker,n=e.getIcon();n.options.className=p("area-select-marker","invalid"),e.setIcon(n)}))),i.fire("as:update-polygon"),"adjust"===this.phase&&(i.fire("as:update-ghost-points"),this.onPolygonReady()),"draw"===this.phase&&(this.closeLine&&i.removeLayer(this.closeLine),s&&(this.closeLine=new d.Polyline([o[0].marker.getLatLng(),o[o.length-1].marker.getLatLng()],{weight:3,color:"#c0c0c0",className:"areaCloseLine"}),i.addLayer(this.closeLine)))}function D(t){var e=this,n=t.index,a=void 0===n?0:n,i=this.getMap();if(this.markers.length>3){this.markers.splice(a||0,1)[0].marker.removeFrom(i),i.fire("as:update-polygon"),"adjust"===this.phase&&i.fire("as:update-ghost-points");for(var r=function(t){e.markers[t].marker.off("drag"),e.markers[t].marker.on("drag",x.bind(e)(t)),e.markers[t].marker.off(f),e.markers[t].marker.on(f,b),e.markers[t].marker.off("dblclick"),e.markers[t].marker.on("dblclick",(function(n){n.originalEvent.stopPropagation(),i.fire("as:marker-remove",L({},e.markers[t],{index:t}))}))},o=a;o<this.markers.length;o++)r(o);this.onPolygonReady()}}function _(){var t=this,e=this.getMap(),n=this.markers,a=n.length>=3,i=new d.Polygon(n.map((function(t){return t.marker.getLatLng()})),L({color:a?"rgb(45, 123, 200)":"rgba(220, 53, 69, 0.7)",weight:2},!a&&{dashArray:"5, 10"},{className:"drawing-area-poligon"}));i.on(f,(function(t){d.DomEvent.stopPropagation(t)})),i.on("dblclick",(function(e){return d.DomEvent.stopPropagation(e),t.onPolygonDblClick(e),!1})),this.polygon&&e.removeLayer(this.polygon),this.polygon=i,e.addLayer(this.polygon)}function E(){var t=this,e=this.getMap();requestAnimationFrame((function(){t.clearGhostMarkers();var n=t.markers,a=t.ghostMarkers;n.forEach((function(i,r){var o=n[r+1]?n[r+1]:n[0],s=i.marker.getLatLng(),c=o.marker.getLatLng(),l=e.latLngToContainerPoint([(s.lat+c.lat)/2,(s.lng+c.lng)/2]),h=new d.DivIcon({className:p("area-select-ghost-marker"),iconSize:[16,16]}),u=new d.Marker(e.containerPointToLatLng(l),{icon:h,draggable:!0}),g={marker:u};u.on(f,b),u.on("dblclick",b),u.on("dragstart",B.bind(t)()),u.on("drag",T.bind(t)(a.length)),u.on("dragend",R.bind(t)(a.length)),a.push(g),u.addTo(e)}))}))}function C(){var t=this.getMap();t.dragging.enable(),t.removeLayer(this.closeLine),this.closeLine=null,this.markers[0].marker.getElement().classList.remove("start-marker"),this.setPhase("adjust"),t.fire("as:update-ghost-points"),this.onPolygonReady(),w(this)}function S(t){if(y(t)){var e=this.getMap();this._dragStatus=e.dragging._enabled,t.stopPropagation(),t.target.blur(),this.options.active||"adjust"===this.phase?(this._dragStatus||e.dragging.disable(),this.options.onButtonDeactivate(this.polygon,this,t),t.defaultPrevented||this.deactivate()):(this.options.onButtonActivate(this,t),t.defaultPrevented||this.activate())}}function x(t){var e=this.getMap();return function(t){requestAnimationFrame((function(){e.fire("as:update-polygon"),e.fire("as:update-ghost-points")}))}}function T(t){var e=this,n=this.getMap();return function(a){var i=a.latlng;requestAnimationFrame((function(){var a=e.markers[t],r=e.markers[t+1]?e.markers[t+1]:e.markers[0];e.ghostPolygon&&n.removeLayer(e.ghostPolygon),e.ghostPolygon=new d.Polygon([a.marker.getLatLng(),i,r.marker.getLatLng()],{color:"rgb(45, 123, 200)",weight:2,opacity:.5,fillOpacity:.1,dashArray:"5, 10"}),n.addLayer(e.ghostPolygon),n.fire("as:update-polygon")}))}}function B(){return function(t){t.target.getElement().classList.add("active")}}function R(t){var e=this,n=this.getMap();return function(a){var i=a.target;i.getElement().classList.remove("active"),i.removeFrom(n),e.ghostPolygon&&n.removeLayer(e.ghostPolygon);var r=n.latLngToContainerPoint(i.getLatLng()),o=n.getContainer().getBoundingClientRect(),s={clientX:r.x+o.left,clientY:r.y+o.top,index:t+1};n.fire("as:point-add",s)}}function I(t){if(!this.mapMoving&&0===this.markers.length&&0!==t.which&&1===t.buttons){var e=this.getMap();if(!this.rectDrawing){this.rectDrawStart=[t.clientX,t.clientY];var n={weight:2,color:"#8B4513",className:"rect-progress-line",opacity:.6};return this.draggingRect=(new d.LayerGroup).addLayer(new d.Polyline([],n)).addLayer(new d.Polyline([],n)).addTo(e),void(this.rectDrawing=!0)}this.rectDrawEnd=[t.clientX,t.clientY];var a=[this.rectDrawStart[0],t.clientY],i=[t.clientX,this.rectDrawStart[1]],r=this.draggingRect.getLayers();r[0].setLatLngs([e.mouseEventToLatLng({clientX:this.rectDrawEnd[0],clientY:this.rectDrawEnd[1]}),e.mouseEventToLatLng({clientX:a[0],clientY:a[1]}),e.mouseEventToLatLng({clientX:this.rectDrawStart[0],clientY:this.rectDrawStart[1]})]),r[1].setLatLngs([e.mouseEventToLatLng({clientX:this.rectDrawEnd[0],clientY:this.rectDrawEnd[1]}),e.mouseEventToLatLng({clientX:i[0],clientY:i[1]}),e.mouseEventToLatLng({clientX:this.rectDrawStart[0],clientY:this.rectDrawStart[1]})])}}function A(){this.rectDrawing=!1;var t={clientX:this.rectDrawStart[0],clientY:this.rectDrawStart[1]},e={clientX:this.rectDrawEnd[0],clientY:this.rectDrawStart[1]},n={clientX:this.rectDrawEnd[0],clientY:this.rectDrawEnd[1]},a={clientX:this.rectDrawStart[0],clientY:this.rectDrawEnd[1]};P.bind(this)(t),P.bind(this)(e),P.bind(this)(n),P.bind(this)(a),this._map.fire("as:creation-end"),this.rectDrawStart=null,this.rectDrawEnd=null,this.draggingRect.removeFrom(this._map)}var O=d.Control.extend({options:{active:!1,fadeOnActivation:!0,onPolygonReady:function(t,e){},onPolygonDblClick:function(t,e,n){},onButtonActivate:function(t,e){},onButtonDeactivate:function(t,e,n){}},initialize:function(t){void 0===t&&(t={}),d.Util.setOptions(this,t),this._map=null,this.phase=t.active?"draw":"inactive",this.mapMoving=!1,this.rectDrawing=!1,this.rectDrawStart=null,this.rectDrawEnd=null,this.draggingRect=null,this.markers=[],this.ghostMarkers=[],this.polygon=null,this.closeLine=null,this._mapMoveStart=this._mapMoveStart.bind(this),this._mapMoveEnd=this._mapMoveEnd.bind(this),this._handleMouseMove=this._handleMouseMove.bind(this)},onAdd:function(t){this._container=d.DomUtil.create("div",p("leaflet-area-selector-control")),this.activateButton=d.DomUtil.create("button","",this._container),this.activateButton.setAttribute("aria-label","Draw shape"),this.activateButton.setAttribute("aria-describedby","draw-panel-help"),this.activateButton.addEventListener("click",S.bind(this)),this.activateButton.addEventListener("dblclick",(function(t){t.stopPropagation()})),this.options.active?this.activateButton.classList.add("active"):this.activateButton.classList.remove("active"),this._map=t;var e=function(t,e){var n,a,i=t.getContainer().querySelector(".leaflet-map-pane"),r=function(t){var e=t.active,n=t.fadeOnActivation;return d.DomUtil.create("div",p("leaflet-map-overlay-pane","leaflet-pane"+(e?"":" inactive")+(n?" fading-enabled":"")))}(e);n=r,(a=i).parentNode.insertBefore(n,a.nextSibling);var o=t.createPane(k,r);return o.addEventListener(f,(function(e){y(e)&&(e.stopPropagation(),t.fire("as:point-add",e))})),o}(t,this.options);return this.addUserHelpPanel(e),t.getContainer().addEventListener("mousemove",this._handleMouseMove),t.on("movestart",this._mapMoveStart),t.on("moveend",this._mapMoveEnd),t.on("as:point-add",P.bind(this)),t.on("as:marker-add",M.bind(this)),t.on("as:marker-remove",D.bind(this)),t.on("as:creation-end",C.bind(this)),t.on("as:update-polygon",_.bind(this)),t.on("as:update-ghost-points",E.bind(this)),t.on("as:dragging-rect-end",A.bind(this)),this._container},onRemove:function(t){t.getContainer().removeEventListener("mousemove",this._handleMouseMove),t.off("movestart",this._mapMoveStart),t.off("moveend",this._mapMoveEnd),t.off("as:point-add"),t.off("as:marker-add"),t.off("as:marker-remove"),t.off("as:creation-end"),t.off("as:update-polygon"),t.off("as:update-ghost-points"),t.off("as:dragging-rect-end")},getMap:function(){return this._map},onPolygonReady:function(){this.options.onPolygonReady(this.polygon,this)},onPolygonDblClick:function(t){this.options.onPolygonDblClick(this.polygon,this,t)},addUserHelpPanel:function(t){var e=d.DomUtil.create("div",p("draw-pane-help"));e.setAttribute("id","draw-panel-help"),e.setAttribute("role","tooltip");var n="Define a polygon by clicking of the map to define vertexes"+(d.Browser.mobile?".":" or click-and-drag to obtain a rectangular shape.");e.textContent=n,t.appendChild(e)},setPhase:function(t,e){void 0===e&&(e=!1),this.phase=t,this.options.active="draw"===t,(e||"draw"===this.phase)&&(this.clearGhostMarkers(),this.clearMarkers(),this.clearPolygon());var n=this._map.getPane(k).parentNode;this.options.active?n.classList.remove("inactive"):n.classList.add("inactive")},_mapMoveStart:function(){this.options.active&&(this.mapMoving=!0)},_mapMoveEnd:function(){var t=this;if(this.options.active){var e=this._map;requestAnimationFrame((function(){t.mapMoving=!1}));var n=e.getPane(k).querySelector(".end-selection-area");if(n){var a=this.markers[0].marker,i=n.getBoundingClientRect();v(n,e.latLngToContainerPoint(a.getLatLng()),new d.Point(-i.width/2,-i.height/2))}}},hoverClosePoint:function(t){this.markers.length>2&&this.closeLine&&this.closeLine.removeFrom(this._map)},outClosePoint:function(t){this.closeLine&&this.closeLine.addTo(this._map)},clearMarkers:function(){var t=this;this.markers.forEach((function(e){e.marker.removeFrom(t._map)})),this.markers=[]},clearGhostMarkers:function(){var t=this;this.ghostMarkers.forEach((function(e){e.marker.removeFrom(t._map)})),this.ghostMarkers=[]},clearPolygon:function(){this.polygon&&this.polygon.removeFrom(this._map),this.polygon=null,this.closeLine&&this.closeLine.removeFrom(this._map),this.closeLine=null},deactivate:function(){w(this),this.activateButton.classList.remove("active"),this._map.getContainer().classList.remove("drawing-area"),this.setPhase("inactive",!0)},activate:function(){this._map.dragging.disable(),this.activateButton.classList.add("active"),this._map.getContainer().classList.add("drawing-area"),this.setPhase("draw",!0)},_handleMouseMove:function(t){this.options.active&&I.bind(this)(t)}});d.Util.extend(d.Control,{DrawAreaSelection:O,drawAreaSelection:function(t){return void 0===t&&(t={}),new O(t)}});var F=n(6130),q=n(9530),X=n(1469),Y=n(8131),j=n(7739),U=n(2918);function Z(t){var e,n,a,i,r,o=t[8].default,s=(0,h.nuO)(o,t,t[7],null);return{c:function(){e=(0,h.bGB)("div"),n=(0,h.DhX)(),s&&s.c(),(0,h.Ljt)(e,"class","map svelte-d2benj"),(0,h.VHj)(e,"add-mode",t[0]),(0,h.VHj)(e,"area-selection-mode",t[1])},m:function(o,c){(0,h.$Tr)(o,e,c),(0,h.$Tr)(o,n,c),s&&s.m(o,c),a=!0,i||(r=(0,h.TVh)(t[2].call(null,e)),i=!0)},p:function(t,n){var i=(0,l.Z)(n,1)[0];1&i&&(0,h.VHj)(e,"add-mode",t[0]),2&i&&(0,h.VHj)(e,"area-selection-mode",t[1]),s&&s.p&&(!a||128&i)&&(0,h.kmG)(s,o,t,t[7],a?(0,h.u2N)(o,t[7],i,null):(0,h.VOJ)(t[7]),null)},i:function(t){a||((0,h.Ui)(s,t),a=!0)},o:function(t){(0,h.etI)(s,t),a=!1},d:function(t){t&&(0,h.ogt)(e),t&&(0,h.ogt)(n),s&&s.d(t),i=!1,r()}}}function G(t,e,n){var a,i,r,o,s,c,l,d,m,p,v;(0,h.FIv)(t,Y.DH,(function(t){return n(3,a=t)})),(0,h.FIv)(t,Y.Nx,(function(t){return n(4,i=t)})),(0,h.FIv)(t,Y.CM,(function(t){return n(5,r=t)})),(0,h.FIv)(t,Y.UI,(function(t){return n(6,o=t)})),(0,h.FIv)(t,Y.wI,(function(t){return n(9,s=t)})),(0,h.FIv)(t,Y.dk,(function(t){return n(10,c=t)})),(0,h.FIv)(t,Y.Qi,(function(t){return n(11,l=t)})),(0,h.FIv)(t,Y.VX,(function(t){return n(12,d=t)})),(0,h.FIv)(t,g.E9,(function(t){return n(13,m=t)})),(0,h.FIv)(t,Y.nN,(function(t){return n(0,p=t)})),(0,h.FIv)(t,Y.Ir,(function(t){return n(1,v=t)}));var f=e.$$slots,y=void 0===f?{}:f,k=e.$$scope;Y._l.set(m);var w=(0,F.Pt)("railwayMode");return Y.wI.set(new O({onPolygonReady:function(t){Y.Wz.set(!0),t.setStyle({color:"var(--color-accent)",weight:4,fillOpacity:.18});var e=t.toGeoJSON().geometry.coordinates;(0,j.LM)(e[0]).then((function(t){var e=t.result;Y.VX.set(e),Y.Wz=!1}))},onPolygonDblClick:function(){var t;return!(null===(t=d)||void 0===t||!t.length)&&Y.Lu.set(!0)},position:"bottomright"})),t.$$set=function(t){"$$scope"in t&&n(7,k=t.$$scope)},t.$$.update=function(){120&t.$$.dirty&&o&&r&&(0,U.b7)(o,r,i||a)},[p,v,function(t){var e,n,h=w?[X.x,X.O]:[X.x];return Y.UI.set(u().map(t,{layers:h})),o.zoomControl.setPosition("bottomleft"),l.length>0?(o.fitBounds(l),null!==(e=r)&&void 0!==e&&null!==(n=e.spots)&&void 0!==n&&n.length&&(0,U.b7)(o,r,i||a)):(0,q.l6)(o),o.on("moveend",(function(){return c&&(0,q._Y)(o)})),o.on("zoomend",(function(){return Y.H4.set(o.getZoom())})),o.addControl(s),{destroy:function(){o.remove(),Y.UI.set(null)}}},a,i,r,o,k,y]}n(6785);const $=function(t){(0,o.Z)(d,t);var e,n,l=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=(0,c.Z)(e);if(n){var i=(0,c.Z)(this).constructor;t=Reflect.construct(a,arguments,i)}else t=a.apply(this,arguments);return(0,s.Z)(this,t)});function d(t){var e;return(0,i.Z)(this,d),e=l.call(this),(0,h.S1n)((0,r.Z)(e),t,G,Z,h.N8,{}),e}return(0,a.Z)(d)}(h.f_C)},1469:(t,e,n)=>{"use strict";n.d(e,{O:()=>c,x:()=>s});var a=n(5243),i=n.n(a),r=n(6897);i().TileLayer.Grayscale=i().TileLayer.extend({options:{quotaRed:21,quotaGreen:71,quotaBlue:8,quotaDividerTune:0,quotaDivider:function(){return this.quotaRed+this.quotaGreen+this.quotaBlue+this.quotaDividerTune}},initialize:function(t,e){(e=e||{}).crossOrigin=!0,i().TileLayer.prototype.initialize.call(this,t,e),this.on("tileload",(function(t){this._makeGrayscale(t.tile)}))},_createTile:function(){var t=i().TileLayer.prototype._createTile.call(this);return t.crossOrigin="Anonymous",t},_makeGrayscale:function(t){if(!t.getAttribute("data-grayscaled")){t.crossOrigin="";var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=e.getContext("2d");n.drawImage(t,0,0);for(var a=n.getImageData(0,0,e.width,e.height),i=a.data,r=0,o=i.length;r<o;r+=4)i[r]=i[r+1]=i[r+2]=(this.options.quotaRed*i[r]+this.options.quotaGreen*i[r+1]+this.options.quotaBlue*i[r+2])/this.options.quotaDivider();n.putImageData(a,0,0),t.setAttribute("data-grayscaled",!0),t.src=e.toDataURL()}}});var o,s=("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",o={minZoom:r.Zj,maxZoom:r.sZ,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',fadeAnimation:!1,crossOrigin:"*"},new(i().TileLayer.Grayscale)("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",o)),c=i().tileLayer("https://{s}.tiles.openrailwaymap.org/standard/{z}/{x}/{y}.png",{minZoom:r.Zj,maxZoom:r.sZ,attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors | Map style: &copy; <a href="https://www.OpenRailwayMap.org">OpenRailwayMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'})},6785:()=>{}}]);