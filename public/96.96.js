(self.webpackChunkmap_of_fame=self.webpackChunkmap_of_fame||[]).push([[96],{1887:(t,e,n)=>{"use strict";n.d(e,{Z:()=>f});var r=n(3144),o=n(5671),i=n(7326),a=n(9340),c=n(2963),u=n(1120),s=n(4234);function l(t){var e;return{c:function(){(e=(0,s.bGB)("div")).innerHTML='<div class="train svelte-1a70k6t"><div class="windows svelte-1a70k6t"></div> \n    <div class="lights svelte-1a70k6t"></div></div> \n  <div class="rails svelte-1a70k6t"><div class="ties svelte-1a70k6t"></div> \n    <div class="ties svelte-1a70k6t"></div> \n    <div class="ties svelte-1a70k6t"></div></div>',(0,s.Ljt)(e,"class","loader svelte-1a70k6t")},m:function(t,n){(0,s.$Tr)(t,e,n)},p:s.ZTd,i:s.ZTd,o:s.ZTd,d:function(t){t&&(0,s.ogt)(e)}}}n(7246);const f=function(t){(0,a.Z)(d,t);var e,n,f=(e=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=(0,u.Z)(e);if(n){var o=(0,u.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,c.Z)(this,t)});function d(t){var e;return(0,o.Z)(this,d),e=f.call(this),(0,s.S1n)((0,i.Z)(e),t,null,l,s.N8,{}),e}return(0,r.Z)(d)}(s.f_C)},4709:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>B});var r=n(3144),o=n(5671),i=n(7326),a=n(9340),c=n(2963),u=n(1120),s=n(885),l=n(4234),f=n(5243),d=n.n(f),v=n(4861),p=n(706),h=n(8407),m=n(6130),y=n(9530),g=n(1469),b=n(8131),w=n(7739),O=n(4942),k=(n(5732),n(6959),n(8261)),Z=n(3882);function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){(0,O.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var j=[],C=null,T=[];b.$.subscribe((function(t){T=t}));var M=function(t,e,n){var r,o;C=d().markerClusterGroup({chunkedLoading:!0,spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,iconCreateFunction:Z.uO,spiderLegPolylineOptions:{weight:0},elementsPlacementStrategy:"default",spiderfyDistanceMultiplier:2});var i=[];if(null==e||null===(r=e.spots)||void 0===r||r.forEach((function(t){var e,n=function(t){var e=t.id,n=t.location,r=n.lat,o=n.lng,i=t.icon,a=t.thumbnail,c=d().marker([r,o],{icon:(0,Z.U3)(i||a,e)});return c.addEventListener("click",(function(){return function(t){var e=(0,k.U2)(b._l),n=t.id,r=t.spotStatus,o=t.img,i=t.title,a=t.videoLink,c=t.user,u=t.publicBanner,s=u.banner,l=u.bannerUrl,f=t.location,d=f.lat,v=f.lng;b.sr.set(L(L({},t),{},{status:r,img:{src:o,title:i||n},video:a,firm:{banner:s,bannerUrl:l},coords:{lat:d,lng:v}})),e("/@:username/spot/:id",{username:c.username,id:n}),b.n_.set(!1),document.getElementById("highlighted").innerHTML=""}(t)})),c}(t);n.isAdditionalCategory=null===(e=T.find((function(e){return e.id===t.categoryId})))||void 0===e?void 0:e.isAdditional,C.addLayer(n),j.push(n),i.push(n)})),null==e||null===(o=e.clusters)||void 0===o||o.forEach((function(e){var n=function(t,e){var n=t.center,r=n.lat,o=n.lng,i=t.spotcnt,a=d().marker([r,o],{icon:(0,Z.xM)(i)});return a.addEventListener("click",(function(){return e.setView([r,o],14)})),a}(e,t);n.count=e.spotcnt,C.addLayer(n),j.push(n),i.push(n)})),t.addLayer(C),n){var a=new(d().featureGroup)(i);t.fitBounds(a.getBounds())}window.dispatchEvent(m.S3)},$=function(t,e,n){var r,o;!function(t){j.length&&j.forEach((function(t){t.removeEventListener("click")})),C&&t.removeLayer(C),j=[]}(t),((null==e||null===(r=e.spots)||void 0===r?void 0:r.length)>0||(null==e||null===(o=e.clusters)||void 0===o?void 0:o.length)>0)&&M(t,e,n)};n(2859),n(7844),n(8568),n(1887),n(6785);var R=function(t){return{}},S=function(t){return{decorator:p.T}};function x(t){var e,n,r,o,i,a=t[8].default,c=(0,l.nuO)(a,t,t[7],S);return{c:function(){e=(0,l.bGB)("div"),n=(0,l.DhX)(),c&&c.c(),(0,l.Ljt)(e,"class","map svelte-d2benj"),(0,l.VHj)(e,"add-mode",t[0]),(0,l.VHj)(e,"area-selection-mode",t[1])},m:function(a,u){(0,l.$Tr)(a,e,u),(0,l.$Tr)(a,n,u),c&&c.m(a,u),r=!0,o||(i=(0,l.TVh)(t[2].call(null,e)),o=!0)},p:function(t,n){var o=(0,s.Z)(n,1)[0];1&o&&(0,l.VHj)(e,"add-mode",t[0]),2&o&&(0,l.VHj)(e,"area-selection-mode",t[1]),c&&c.p&&(!r||128&o)&&(0,l.kmG)(c,a,t,t[7],r?(0,l.u2N)(a,t[7],o,R):(0,l.VOJ)(t[7]),S)},i:function(t){r||((0,l.Ui)(c,t),r=!0)},o:function(t){(0,l.etI)(c,t),r=!1},d:function(t){t&&(0,l.ogt)(e),t&&(0,l.ogt)(n),c&&c.d(t),o=!1,i()}}}function P(t,e,n){var r,o,i,a,c,u,s,f,p,O,k;(0,l.FIv)(t,b.DH,(function(t){return n(3,r=t)})),(0,l.FIv)(t,b.Nx,(function(t){return n(4,o=t)})),(0,l.FIv)(t,b.CM,(function(t){return n(5,i=t)})),(0,l.FIv)(t,b.UI,(function(t){return n(6,a=t)})),(0,l.FIv)(t,b.wI,(function(t){return n(9,c=t)})),(0,l.FIv)(t,b.dk,(function(t){return n(10,u=t)})),(0,l.FIv)(t,b.Qi,(function(t){return n(11,s=t)})),(0,l.FIv)(t,v.E9,(function(t){return n(12,f=t)})),(0,l.FIv)(t,b.VX,(function(t){return n(13,p=t)})),(0,l.FIv)(t,b.nN,(function(t){return n(0,O=t)})),(0,l.FIv)(t,b.Ir,(function(t){return n(1,k=t)}));var Z=e.$$slots,I=void 0===Z?{}:Z,L=e.$$scope;b._l.set(f);var j=(0,m.Pt)("railwayMode");return b.wI.set(new h.T({onPolygonReady:function(t){b.Wz.set(!0),t.setStyle({color:"var(--color-accent)",weight:4,fillOpacity:.18});var e=t.toGeoJSON().geometry.coordinates;(0,w.LM)(e[0]).then((function(t){var e=t.result;b.VX.set(e),b.Wz.set(!1)}))},onPolygonDblClick:function(){var t;return!(null===(t=p)||void 0===t||!t.length)&&f("/selected-spots")},position:"bottomright"})),t.$$set=function(t){"$$scope"in t&&n(7,L=t.$$scope)},t.$$.update=function(){120&t.$$.dirty&&a&&i&&$(a,i,o||r)},[O,k,function(t){var e,n,l=j?[g.x,g.O]:[g.x];return b.UI.set(d().map(t,{layers:l})),a.zoomControl.setPosition("bottomleft"),s.length>0?(a.fitBounds(s),null!==(e=i)&&void 0!==e&&null!==(n=e.spots)&&void 0!==n&&n.length&&$(a,i,o||r)):(0,y.l6)(a),a.on("moveend",(function(){return u&&(0,y._Y)(a)})),a.on("zoomend",(function(){return b.H4.set(a.getZoom())})),a.addControl(c),{destroy:function(){a.remove(),b.UI.set(null)}}},r,o,i,a,L,I]}const B=function(t){(0,a.Z)(f,t);var e,n,s=(e=f,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=(0,u.Z)(e);if(n){var o=(0,u.Z)(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return(0,c.Z)(this,t)});function f(t){var e;return(0,o.Z)(this,f),e=s.call(this),(0,l.S1n)((0,i.Z)(e),t,P,x,l.N8,{}),e}return(0,r.Z)(f)}(l.f_C)},3882:(t,e,n)=>{"use strict";n.d(e,{IH:()=>i,U3:()=>a,uO:()=>c,xM:()=>u});var r=n(5243),o=n.n(r),i=o().icon({iconUrl:"./images/new-marker.svg",iconSize:[44,60],iconAnchor:[22,60]}),a=function(t,e){return o().icon({iconUrl:t,iconSize:[56,56],className:"map-marker-with-photo marker-id-".concat(e)})},c=function(t){var e=t.getAllChildMarkers(),n=0,r=e.some((function(t){return"boolean"==typeof t.isAdditionalCategory}));return e.some((function(t){return"number"==typeof t.count}))&&e.forEach((function(t){var e;n+=null!==(e=t.count)&&void 0!==e?e:0})),r&&e.forEach((function(t){t.isAdditionalCategory||t.count||(n+=1)})),(Number.isNaN(n)||0===n&&!r)&&(n=t.getChildCount()),0!==n?o().divIcon({html:n<1e3?n:"".concat(Math.floor(n/1e3),"K"),className:"map-marker-cluster",iconSize:[56,56]}):o().divIcon({html:"",iconSize:[0,0]})},u=function(t){return o().divIcon({html:t<1e3?t:"".concat(Math.floor(t/1e3),"K"),className:"map-marker-cluster",iconSize:[56,56]})}},1469:(t,e,n)=>{"use strict";n.d(e,{O:()=>u,x:()=>c});var r=n(5243),o=n.n(r),i=n(6897);o().TileLayer.Grayscale=o().TileLayer.extend({options:{quotaRed:21,quotaGreen:71,quotaBlue:8,quotaDividerTune:0,quotaDivider:function(){return this.quotaRed+this.quotaGreen+this.quotaBlue+this.quotaDividerTune}},initialize:function(t,e){(e=e||{}).crossOrigin=!0,o().TileLayer.prototype.initialize.call(this,t,e),this.on("tileload",(function(t){this._makeGrayscale(t.tile)}))},_createTile:function(){var t=o().TileLayer.prototype._createTile.call(this);return t.crossOrigin="Anonymous",t},_makeGrayscale:function(t){if(!t.getAttribute("data-grayscaled")){t.crossOrigin="";var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=e.getContext("2d");n.drawImage(t,0,0);for(var r=n.getImageData(0,0,e.width,e.height),o=r.data,i=0,a=o.length;i<a;i+=4)o[i]=o[i+1]=o[i+2]=(this.options.quotaRed*o[i]+this.options.quotaGreen*o[i+1]+this.options.quotaBlue*o[i+2])/this.options.quotaDivider();n.putImageData(r,0,0),t.setAttribute("data-grayscaled",!0),t.src=e.toDataURL()}}});var a,c=("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",a={minZoom:i.Zj,maxZoom:i.sZ,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',fadeAnimation:!1,crossOrigin:"*"},new(o().TileLayer.Grayscale)("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",a)),u=o().tileLayer("https://{s}.tiles.openrailwaymap.org/standard/{z}/{x}/{y}.png",{minZoom:i.Zj,maxZoom:i.sZ,attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors | Map style: &copy; <a href="https://www.OpenRailwayMap.org">OpenRailwayMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'})},7246:()=>{},6785:()=>{}}]);