import{S as I,i as L,s as P,I as M,K as h,b as U,M as T,l as q,ay as X,T as d,ao as Z,aw as G,aG as x,ap as A,bo as ee,aT as F,E as te,aU as b,aR as p,ag as se,aC as re,H as ae,an as _,az as k,ad as ne,a$ as oe,bp as le,a as N,m as O,h as H,t as z,d as B}from"./index-09f9502f.js";import{e as Y}from"./each-d91c6e2f.js";import{a as ie,g as ce}from"./datesUtils-5f8af51f.js";import{b as ue,c as fe}from"./init-9beff97c.js";import{g as de}from"./spot-3b7b98da.js";import{M as me}from"./Modal-7bbfe9bb.js";import"./auth-f14ad06a.js";import"./endpoints-b6cf54a2.js";import"./transformers-2ad5cf36.js";import"./globals-7f7f1b26.js";function v(s,r,t){const e=s.slice();return e[17]=r[t],e}function D(s){let r,t,e=s[17]+"",n,l,o,i;function g(){return s[6](s[17])}return{c(){r=M("li"),t=M("a"),n=re(e),l=ae(),h(t,"href",`#${s[17]}`),h(t,"class","year svelte-14uhtgt"),_(t,"active",`${s[17]}`===s[1]),_(t,"disabled",s[4](s[17],s[0])),h(r,"class","svelte-14uhtgt")},m(u,f){U(u,r,f),k(r,t),k(t,n),k(r,l),o||(i=ne(t,"click",oe(g)),o=!0)},p(u,f){s=u,f&6&&_(t,"active",`${s[17]}`===s[1]),f&21&&_(t,"disabled",s[4](s[17],s[0]))},d(u){u&&q(r),o=!1,i()}}}function pe(s){let r,t=Y(s[2]),e=[];for(let n=0;n<t.length;n+=1)e[n]=D(v(s,t,n));return{c(){r=M("ol");for(let n=0;n<e.length;n+=1)e[n].c();h(r,"class","years-list svelte-14uhtgt")},m(n,l){U(n,r,l);for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(r,null)},p(n,[l]){if(l&31){t=Y(n[2]);let o;for(o=0;o<t.length;o+=1){const i=v(n,t,o);e[o]?e[o].p(i,l):(e[o]=D(i),e[o].c(),e[o].m(r,null))}for(;o<e.length;o+=1)e[o].d(1);e.length=t.length}},i:T,o:T,d(n){n&&q(r),X(e,n)}}}function ge(s,r,t){var w;let e,n,l,o,i,g;d(s,Z,a=>t(10,e=a)),d(s,G,a=>t(11,n=a)),d(s,x,a=>t(12,l=a)),d(s,A,a=>t(13,o=a)),d(s,ee,a=>t(5,i=a)),d(s,F,a=>t(1,g=a));let{yearStart:u,yearEnd:f,additionalYears:$}=i||{},C;te(()=>{ue().then(a=>{const{result:c,success:S}=a;S&&c&&t(0,C=c.map(y=>y.year))})});let m=(w=o.years)==null?void 0:w.map(a=>a!==null?`${a}`:b);const J=[...ie(u,f,$&&JSON.parse($)).reverse(),p],K=se("token")||null,E=a=>{const c=a!==b?`${a}`:"";F.set(`${a}`),l.id?l.id&&de(l.id,K,{year:c===p?void 0:c,offset:0,limit:99999999999999}).then(S=>{const{success:y,result:R}=S;if(y&&R){const{spots:V,years:W}=R;A.set({spots:V,years:ce(W)}),document.getElementById("highlighted").innerHTML=""}}):fe(a),n("/")},j=(a,c)=>!!(+a>le()||!(c!=null&&c.includes(+a))&&a!==b&&a!==p||m!=null&&m.length&&!(m!=null&&m.includes(a))&&a!==p||!e&&a===p),Q=a=>E(a);return s.$$.update=()=>{s.$$.dirty&32&&i&&(u=i.yearStart,f=i.yearEnd,$=i.additionalYears)},[C,g,J,E,j,i,Q]}class _e extends I{constructor(r){super(),L(this,r,ge,pe,P,{})}}function he(s){let r,t;return r=new _e({}),{c(){N(r.$$.fragment)},m(e,n){O(r,e,n),t=!0},i(e){t||(H(r.$$.fragment,e),t=!0)},o(e){z(r.$$.fragment,e),t=!1},d(e){B(r,e)}}}function $e(s){let r,t;return r=new me({props:{id:"calendar-modal",title:"Years",withAd:!0,autoMargin:!0,$$slots:{default:[he]},$$scope:{ctx:s}}}),r.$on("close",s[1]),{c(){N(r.$$.fragment)},m(e,n){O(r,e,n),t=!0},p(e,[n]){const l={};n&4&&(l.$$scope={dirty:n,ctx:e}),r.$set(l)},i(e){t||(H(r.$$.fragment,e),t=!0)},o(e){z(r.$$.fragment,e),t=!1},d(e){B(r,e)}}}function Se(s,r,t){let e;return d(s,G,l=>t(0,e=l)),[e,()=>e("/")]}class Ye extends I{constructor(r){super(),L(this,r,Se,$e,P,{})}}export{Ye as default};
