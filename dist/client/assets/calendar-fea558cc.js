import{S as I,i as L,s as P,I as M,K as h,b as q,M as F,l as N,aw as X,T as d,an as Z,au as O,aF as x,ao as T,bn as ee,aS as R,E as te,aT as b,aQ as p,af as se,aA as re,H as ae,am as g,ax as k,ad as ne,a_ as oe,bo as le,a as U,m as G,h as H,t as B,d as J}from"./index-e502461a.js";import{e as Y}from"./each-86a114b8.js";import{a as ie,g as ce}from"./datesUtils-b77fe30a.js";import{b as ue,c as fe}from"./init-e6ec0936.js";import{g as de}from"./spot-9709e91e.js";import{M as me}from"./Modal-491dd598.js";import"./auth-e9453778.js";import"./endpoints-6d51edb4.js";import"./transformers-2ad5cf36.js";import"./globals-7f7f1b26.js";function v(s,r,t){const e=s.slice();return e[17]=r[t],e}function D(s){let r,t,e=s[17]+"",n,l,o,i;function _(){return s[6](s[17])}return{c(){r=M("li"),t=M("a"),n=re(e),l=ae(),h(t,"href",`#${s[17]}`),h(t,"class","year svelte-14uhtgt"),g(t,"active",`${s[17]}`===s[1]),g(t,"disabled",s[4](s[17],s[0])),h(r,"class","svelte-14uhtgt")},m(u,f){q(u,r,f),k(r,t),k(t,n),k(r,l),o||(i=ne(t,"click",oe(_)),o=!0)},p(u,f){s=u,f&6&&g(t,"active",`${s[17]}`===s[1]),f&21&&g(t,"disabled",s[4](s[17],s[0]))},d(u){u&&N(r),o=!1,i()}}}function pe(s){let r,t=Y(s[2]),e=[];for(let n=0;n<t.length;n+=1)e[n]=D(v(s,t,n));return{c(){r=M("ol");for(let n=0;n<e.length;n+=1)e[n].c();h(r,"class","years-list svelte-14uhtgt")},m(n,l){q(n,r,l);for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(r,null)},p(n,[l]){if(l&31){t=Y(n[2]);let o;for(o=0;o<t.length;o+=1){const i=v(n,t,o);e[o]?e[o].p(i,l):(e[o]=D(i),e[o].c(),e[o].m(r,null))}for(;o<e.length;o+=1)e[o].d(1);e.length=t.length}},i:F,o:F,d(n){n&&N(r),X(e,n)}}}function _e(s,r,t){var A;let e,n,l,o,i,_;d(s,Z,a=>t(10,e=a)),d(s,O,a=>t(11,n=a)),d(s,x,a=>t(12,l=a)),d(s,T,a=>t(13,o=a)),d(s,ee,a=>t(5,i=a)),d(s,R,a=>t(1,_=a));let{yearStart:u,yearEnd:f,additionalYears:$}=i||{},E;te(()=>{ue().then(a=>{const{result:c,success:S}=a;S&&c&&t(0,E=c.map(y=>y.year))})});let m=(A=o.years)==null?void 0:A.map(a=>a!==null?`${a}`:b);const K=[...ie(u,f,$&&JSON.parse($)).reverse(),p],Q=se("token")||null,w=a=>{const c=a!==b?`${a}`:"";R.set(`${a}`),l.id?l.id&&de(l.id,Q,{year:c===p?void 0:c,offset:0,limit:99999999999999}).then(S=>{const{success:y,result:C}=S;if(y&&C){const{spots:V,years:W}=C;T.set({spots:V,years:ce(W)}),document.getElementById("highlighted").innerHTML=""}}):fe(a),n("/")},j=(a,c)=>!!(+a>le()||!(c!=null&&c.includes(+a))&&a!==b&&a!==p||m!=null&&m.length&&!(m!=null&&m.includes(a))&&a!==p||!e&&a===p),z=a=>w(a);return s.$$.update=()=>{s.$$.dirty&32&&i&&(u=i.yearStart,f=i.yearEnd,$=i.additionalYears)},[E,_,K,w,j,i,z]}class ge extends I{constructor(r){super(),L(this,r,_e,pe,P,{})}}function he(s){let r,t;return r=new ge({}),{c(){U(r.$$.fragment)},m(e,n){G(r,e,n),t=!0},i(e){t||(H(r.$$.fragment,e),t=!0)},o(e){B(r.$$.fragment,e),t=!1},d(e){J(r,e)}}}function $e(s){let r,t;return r=new me({props:{id:"calendar-modal",title:"Years",withAd:!0,autoMargin:!0,$$slots:{default:[he]},$$scope:{ctx:s}}}),r.$on("close",s[1]),{c(){U(r.$$.fragment)},m(e,n){G(r,e,n),t=!0},p(e,[n]){const l={};n&4&&(l.$$scope={dirty:n,ctx:e}),r.$set(l)},i(e){t||(H(r.$$.fragment,e),t=!0)},o(e){B(r.$$.fragment,e),t=!1},d(e){J(r,e)}}}function Se(s,r,t){let e;return d(s,O,l=>t(0,e=l)),[e,()=>e("/")]}class Ye extends I{constructor(r){super(),L(this,r,Se,$e,P,{})}}export{Ye as default};
