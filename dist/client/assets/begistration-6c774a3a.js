import{S as le,i as ue,s as fe,I as F,H as L,aA as W,a as A,K as R,b as z,ax as y,m as B,ad as Le,a_ as Ae,h as w,g as G,t as $,f as H,aK as Be,a$ as J,b9 as ee,l as Q,d as M,T as q,au as me,bg as te,aI as Me,E as Pe,M as pe,G as j,b1 as D,b2 as Y,b0 as X,bh as I,aY as U,aE as Ne,aP as Ue,bi as Fe,bj as Re,bk as je,bl as De,bm as Ye}from"./index-b97375a6.js";import{f as K,M as Ge}from"./Modal-eca6e7db.js";import{g as He,A as ce}from"./AutoComplete-1782bd78.js";import{n as Ke}from"./auth-42cd4e99.js";import{t as We}from"./transformers-2ad5cf36.js";import{B as qe}from"./ButtonModalBack-dd3cb01c.js";import{B as Oe}from"./ButtonPrimary-548ded10.js";import{F as ze}from"./FormEmailInput-88c0115f.js";import{F as Je}from"./FormPasswordInput-eac48a02.js";import{F as O}from"./FormTextInput-c7528b0f.js";import"./globals-7f7f1b26.js";import"./endpoints-5fb45e2d.js";import"./SelectIndicatorSvg-371d91b9.js";import"./each-8cb05188.js";function re(r){let e,t;return e=new qe({props:{withTransition:!0}}),e.$on("click",r[17]),{c(){A(e.$$.fragment)},m(o,f){B(e,o,f),t=!0},p:pe,i(o){t||(w(e.$$.fragment,o),t=!0)},o(o){$(e.$$.fragment,o),t=!1},d(o){M(e,o)}}}function ne(r){let e,t,o,f,c,a,g,m,u,E,v,V;function p(n){r[19](n)}let d={placeholder:"Email",errorText:r[1].email};r[2]!==void 0&&(d.value=r[2]),t=new ze({props:d}),j.push(()=>D(t,"value",p)),t.$on("input",r[20]);function s(n){r[21](n)}let S={placeholder:"Password",autocomplete:"new-password",errorText:r[1].password};r[3]!==void 0&&(S.value=r[3]),c=new Je({props:S}),j.push(()=>D(c,"value",s)),c.$on("input",r[22]);function b(n){r[23](n)}let h={items:r[13],optionIdentifier:"name",label:"name",placeholder:"Profile Subtype",errorMessage:r[1].userType,showIndicator:!0};return r[4]!==void 0&&(h.selectedValue=r[4]),u=new ce({props:h}),j.push(()=>D(u,"selectedValue",b)),u.$on("select",r[24]),{c(){e=F("div"),A(t.$$.fragment),f=L(),A(c.$$.fragment),g=L(),m=F("div"),A(u.$$.fragment),R(m,"class","profile_subtype")},m(n,l){z(n,e,l),B(t,e,null),y(e,f),B(c,e,null),y(e,g),y(e,m),B(u,m,null),V=!0},p(n,l){const _={};l[0]&2&&(_.errorText=n[1].email),!o&&l[0]&4&&(o=!0,_.value=n[2],Y(()=>o=!1)),t.$set(_);const k={};l[0]&2&&(k.errorText=n[1].password),!a&&l[0]&8&&(a=!0,k.value=n[3],Y(()=>a=!1)),c.$set(k);const T={};l[0]&2&&(T.errorMessage=n[1].userType),!E&&l[0]&16&&(E=!0,T.selectedValue=n[4],Y(()=>E=!1)),u.$set(T)},i(n){V||(w(t.$$.fragment,n),w(c.$$.fragment,n),w(u.$$.fragment,n),n&&(v||J(()=>{v=X(e,K,{duration:200}),v.start()})),V=!0)},o(n){$(t.$$.fragment,n),$(c.$$.fragment,n),$(u.$$.fragment,n),V=!1},d(n){n&&Q(e),M(t),M(c),M(u)}}}function se(r){let e,t,o,f,c,a,g,m,u,E,v,V;t=new O({props:{placeholder:"Username",errorText:r[1].username,value:r[5]}}),t.$on("input",r[16]);let p=r[4].name!==I.crew&&ae(r),d=r[4].name!==I.hunter&&oe(r);function s(n){r[29](n)}let S={items:r[11],optionIdentifier:"name",label:"name",placeholder:"Country",errorMessage:r[1].country};r[8]!==void 0&&(S.selectedValue=r[8]),a=new ce({props:S}),j.push(()=>D(a,"selectedValue",s)),a.$on("select",r[30]);function b(n){r[31](n)}let h={placeholder:"Link to Your Portfolio: Like Instagram@",errorText:r[1].link};return r[9]!==void 0&&(h.value=r[9]),u=new O({props:h}),j.push(()=>D(u,"value",b)),u.$on("input",r[32]),{c(){e=F("div"),A(t.$$.fragment),o=L(),p&&p.c(),f=L(),d&&d.c(),c=L(),A(a.$$.fragment),m=L(),A(u.$$.fragment)},m(n,l){z(n,e,l),B(t,e,null),y(e,o),p&&p.m(e,null),y(e,f),d&&d.m(e,null),y(e,c),B(a,e,null),y(e,m),B(u,e,null),V=!0},p(n,l){const _={};l[0]&2&&(_.errorText=n[1].username),l[0]&32&&(_.value=n[5]),t.$set(_),n[4].name!==I.crew?p?(p.p(n,l),l[0]&16&&w(p,1)):(p=ae(n),p.c(),w(p,1),p.m(e,f)):p&&(G(),$(p,1,1,()=>{p=null}),H()),n[4].name!==I.hunter?d?(d.p(n,l),l[0]&16&&w(d,1)):(d=oe(n),d.c(),w(d,1),d.m(e,c)):d&&(G(),$(d,1,1,()=>{d=null}),H());const k={};l[0]&2048&&(k.items=n[11]),l[0]&2&&(k.errorMessage=n[1].country),!g&&l[0]&256&&(g=!0,k.selectedValue=n[8],Y(()=>g=!1)),a.$set(k);const T={};l[0]&2&&(T.errorText=n[1].link),!E&&l[0]&512&&(E=!0,T.value=n[9],Y(()=>E=!1)),u.$set(T)},i(n){V||(w(t.$$.fragment,n),w(p),w(d),w(a.$$.fragment,n),w(u.$$.fragment,n),n&&(v||J(()=>{v=X(e,K,{duration:200}),v.start()})),V=!0)},o(n){$(t.$$.fragment,n),$(p),$(d),$(a.$$.fragment,n),$(u.$$.fragment,n),V=!1},d(n){n&&Q(e),M(t),p&&p.d(),d&&d.d(),M(a),M(u)}}}function ae(r){let e,t,o;function f(a){r[25](a)}let c={placeholder:r[4].name===I.artist?"Artist Name":"Name",errorText:r[1].name};return r[6]!==void 0&&(c.value=r[6]),e=new O({props:c}),j.push(()=>D(e,"value",f)),e.$on("input",r[26]),{c(){A(e.$$.fragment)},m(a,g){B(e,a,g),o=!0},p(a,g){const m={};g[0]&16&&(m.placeholder=a[4].name===I.artist?"Artist Name":"Name"),g[0]&2&&(m.errorText=a[1].name),!t&&g[0]&64&&(t=!0,m.value=a[6],Y(()=>t=!1)),e.$set(m)},i(a){o||(w(e.$$.fragment,a),o=!0)},o(a){$(e.$$.fragment,a),o=!1},d(a){M(e,a)}}}function oe(r){let e,t,o;function f(a){r[27](a)}let c={placeholder:"Crew",errorText:r[1].crew};return r[7]!==void 0&&(c.value=r[7]),e=new O({props:c}),j.push(()=>D(e,"value",f)),e.$on("input",r[28]),{c(){A(e.$$.fragment)},m(a,g){B(e,a,g),o=!0},p(a,g){const m={};g[0]&2&&(m.errorText=a[1].crew),!t&&g[0]&128&&(t=!0,m.value=a[7],Y(()=>t=!1)),e.$set(m)},i(a){o||(w(e.$$.fragment,a),o=!0)},o(a){$(e.$$.fragment,a),o=!1},d(a){M(e,a)}}}function ie(r){let e,t,o,f,c,a,g;return{c(){e=F("div"),t=F("span"),t.textContent="Have an account?",o=L(),f=F("a"),c=W("Log in"),R(f,"href",a=r[12]("/login")),R(f,"class","svelte-195ewju"),R(e,"class","switch-to-sign-in svelte-195ewju")},m(m,u){z(m,e,u),y(e,t),y(e,o),y(e,f),y(f,c)},p(m,u){u[0]&4096&&a!==(a=m[12]("/login"))&&R(f,"href",a)},i(m){m&&(g||J(()=>{g=X(e,K,{duration:200}),g.start()}))},o:pe,d(m){m&&Q(e)}}}function Qe(r){let e,t,o,f,c,a,g,m,u,E,v,V,p,d,s,S,b=r[0]===2&&re(r),h=r[0]===1&&ne(r),n=r[0]===2&&se(r);v=new Oe({props:{text:r[0]==1?"Next":"Register",type:"submit",className:"wide",isDisabled:r[10]}});let l=r[0]===1&&ie(r);return{c(){e=F("form"),b&&b.c(),t=L(),o=F("div"),f=W("step "),c=W(r[0]),a=W(" of 2"),g=L(),h&&h.c(),m=L(),n&&n.c(),u=L(),E=F("div"),A(v.$$.fragment),V=L(),l&&l.c(),R(o,"class","step svelte-195ewju"),R(E,"class","submit-wrapper svelte-195ewju"),e.noValidate=!0,R(e,"class","svelte-195ewju")},m(_,k){z(_,e,k),b&&b.m(e,null),y(e,t),y(e,o),y(o,f),y(o,c),y(o,a),y(e,g),h&&h.m(e,null),y(e,m),n&&n.m(e,null),y(e,u),y(e,E),B(v,E,null),y(e,V),l&&l.m(e,null),d=!0,s||(S=Le(e,"submit",Ae(r[14])),s=!0)},p(_,k){_[0]===2?b?(b.p(_,k),k[0]&1&&w(b,1)):(b=re(_),b.c(),w(b,1),b.m(e,t)):b&&(G(),$(b,1,1,()=>{b=null}),H()),(!d||k[0]&1)&&Be(c,_[0]),_[0]===1?h?(h.p(_,k),k[0]&1&&w(h,1)):(h=ne(_),h.c(),w(h,1),h.m(e,m)):h&&(G(),$(h,1,1,()=>{h=null}),H()),_[0]===2?n?(n.p(_,k),k[0]&1&&w(n,1)):(n=se(_),n.c(),w(n,1),n.m(e,u)):n&&(G(),$(n,1,1,()=>{n=null}),H());const T={};k[0]&1&&(T.text=_[0]==1?"Next":"Register"),k[0]&1024&&(T.isDisabled=_[10]),v.$set(T),_[0]===1?l?(l.p(_,k),k[0]&1&&w(l,1)):(l=ie(_),l.c(),w(l,1),l.m(e,null)):l&&(l.d(1),l=null)},i(_){d||(w(b),w(h),w(n),w(v.$$.fragment,_),w(l),J(()=>{d&&(p||(p=ee(e,K,{duration:200},!0)),p.run(1))}),d=!0)},o(_){$(b),$(h),$(n),$(v.$$.fragment,_),p||(p=ee(e,K,{duration:200},!1)),p.run(0),d=!1},d(_){_&&Q(e),b&&b.d(),h&&h.d(),n&&n.d(),M(v),l&&l.d(),_&&p&&p.end(),s=!1,S()}}}function Xe(r,e,t){let o,f,c;q(r,me,i=>t(33,o=i)),q(r,te,i=>t(11,f=i)),q(r,Me,i=>t(12,c=i));let a=1,g="",m="",u,E="@",v="",V="",p,d="",s={email:"",password:"",userType:"",username:"",name:"",crew:"",country:"",link:""},S=!1,b=!1;const h=[{id:I.artist.toLowerCase(),name:I.artist},{id:I.crew.toLowerCase(),name:I.crew},{id:I.hunter.toLowerCase(),name:I.hunter}];Pe(()=>{(!f||f.length===0)&&n()});const n=()=>{He().then(i=>{const{success:P,result:N}=i;P&&N&&te.set(We(N))})},l=i=>i.startsWith("@")?i.substring(1):i,_=()=>{if(a===1){const i=je(g),P=De(m);i&&P&&u?(t(1,s.email="",s),t(1,s.password="",s),t(1,s.userType="",s)):(i?t(1,s.email="",s):t(1,s.email=g?U.emailInvalid:U.emailEmpty,s),P?t(1,s.password="",s):t(1,s.password=m?U.passwordInvalid:U.passwordEmpty,s),t(1,s.userType=u?"":U.profileSubtypeEmpty,s))}else{const i=l(E);Ye(i)?t(1,s.username="",s):t(1,s.username=i?U.usernameInvalid:U.usernameEmpty,s),(u==null?void 0:u.name)!==I.crew?t(1,s.name=v?"":U.nameEmpty,s):t(1,s.crew=V?"":U.crewEmpty,s),t(1,s.country=p?"":U.countryCityEmpty,s)}},k=()=>{_(),a===1?!s.email&&!s.password&&!s.userType&&(t(0,a=2),t(1,s={email:"",password:"",userType:"",username:"",name:"",crew:"",country:"",link:""})):!s.username&&!s.name&&!s.crew&&!s.country&&!s.link&&(t(18,b=!0),Ke({name:v,username:l(E),password:m,email:g,country:p.name,type:u.id,crew:V,link:d}).then(i=>{const{success:P,result:N,errors:C}=i;t(18,b=!1),P&&N?(Ne.set(N),Ue.set(!0),Fe.set(N.isNewbie),Re("token",N.token),o("/")):(C!=null&&C.email&&(t(1,s.email=C.email,s),t(0,a=1)),C!=null&&C.password&&(t(1,s.password=C.password[0],s),t(0,a=1)),Array.isArray(C)&&t(1,s.link=C[0],s),C!=null&&C.username&&Array.isArray(C.username)&&t(1,s.username=C.username[0],s))}).catch(i=>{console.error(i),t(18,b=!1),t(1,s.password="Something went wrong",s)}))},T=i=>{(S||a===1&&(s.email||s.password||s.userType)||a===2&&(s.username||s.name||s.crew||s.country||s.link))&&t(1,s[i]="",s)},_e=i=>{var P,N,C,Z,x;if(T("username"),!((C=(N=(P=i==null?void 0:i.detail)==null?void 0:P.target)==null?void 0:N.value)!=null&&C.startsWith("@"))){i.detail.target.value=E;return}t(5,E=(x=(Z=i==null?void 0:i.detail)==null?void 0:Z.target)==null?void 0:x.value)},de=()=>{t(0,a=1)};function ge(i){g=i,t(2,g)}const we=()=>T("email");function be(i){m=i,t(3,m)}const he=()=>T("password");function ke(i){u=i,t(4,u)}const $e=()=>T("userType");function ve(i){v=i,t(6,v)}const Te=()=>T("name");function ye(i){V=i,t(7,V)}const Ee=()=>T("crew");function Ve(i){p=i,t(8,p)}const Ce=()=>T("country");function Ie(i){d=i,t(9,d)}const Se=()=>T("link");return r.$$.update=()=>{r.$$.dirty[0]&262147&&t(10,S=b||a===1&&(!!s.email||!!s.password||!!s.userType)||a===2&&(!!s.name||!!s.crew||!!s.country||!!s.link))},[a,s,g,m,u,E,v,V,p,d,S,f,c,h,k,T,_e,de,b,ge,we,be,he,ke,$e,ve,Te,ye,Ee,Ve,Ce,Ie,Se]}class Ze extends le{constructor(e){super(),ue(this,e,Xe,Qe,fe,{},null,[-1,-1])}}function xe(r){let e,t;return e=new Ze({}),{c(){A(e.$$.fragment)},m(o,f){B(e,o,f),t=!0},i(o){t||(w(e.$$.fragment,o),t=!0)},o(o){$(e.$$.fragment,o),t=!1},d(o){M(e,o)}}}function et(r){let e,t;return e=new Ge({props:{id:"registration-modal",title:"Begistration",withFooter:!0,$$slots:{default:[xe]},$$scope:{ctx:r}}}),e.$on("close",r[1]),{c(){A(e.$$.fragment)},m(o,f){B(e,o,f),t=!0},p(o,[f]){const c={};f&4&&(c.$$scope={dirty:f,ctx:o}),e.$set(c)},i(o){t||(w(e.$$.fragment,o),t=!0)},o(o){$(e.$$.fragment,o),t=!1},d(o){M(e,o)}}}function tt(r,e,t){let o;return q(r,me,c=>t(0,o=c)),[o,()=>o("/")]}class gt extends le{constructor(e){super(),ue(this,e,tt,et,fe,{})}}export{gt as default};
