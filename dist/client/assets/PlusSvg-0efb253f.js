import{S as R,i as y,s as M,bb as U,K as f,b as O,ax as p,M as v,l as b}from"./index-b97375a6.js";function B(r,t){const i=r.slice(0,131072),s=new FileReader;s.onload=o=>{const n=new DataView(o.target.result);let c=1;if(n.getUint16(0,!1)!==65496){t(r,c);return}const g=n.byteLength;let e=2;const u=new Uint8Array(g);for(u.set(new Uint8Array(n.buffer.slice(0,e)));e<g;){const d=n.getUint16(e,!1);if(e+=2,d===65505){if(e+=2,n.getUint32(e,!1)!==1165519206){t(r,c);return}const a=n.getUint16(e+=6,!1)===18761;e+=n.getUint32(e+4,a);const l=n.getUint16(e,a);e+=2;let m=!1;for(let h=0;h<l;h+=1)if(n.getUint16(e+h*12,a)===274){c=n.getUint16(e+h*12+8,a),c>1&&(u[e+h*12+8]=1,u[e+h*12+9]=0),m=!0;break}if(!m){t(r,c);return}}else{if((d&65280)!==65280)break;{const a=n.getUint16(e,!1);u.set(new Uint8Array(n.buffer.slice(e-2,e+a))),e+=a}}}const w=new Blob([u],{type:r.type});t(w,c)},s.readAsArrayBuffer(i)}function I(r,t,i,s){const o=document.createElement("canvas");return o.width=t,o.height=i,s>1&&console.debug(`EXIF orientation = ${s}, rotating picture`),o.getContext("2d").drawImage(r,0,0,t,i),o}const j=(r,t,i,s,o,n,c)=>{if(r.size<=t){c(r);return}const g=new Image;function e(){URL.revokeObjectURL(this.src),c(r)}function u(){URL.revokeObjectURL(this.src),B(r,(w,d)=>{let a=g.width,l=g.height;const m=d>4?Math.min(s/a,i/l,1):Math.min(i/a,s/l,1);l=Math.round(l*m),a=Math.round(a*m);const h=I(g,a,l,d),L=d>1;h.toBlob(x=>{console.debug(`Resized image to ${a}x${l}, ${x.size>>10}kB`),n&&w.size>t?j(new File([x],"image.jpg"),t,Math.round(a*.85),Math.round(l*.85),o,n,c):c(x,L)},"image/jpeg",o)})}g.onerror=e,g.onload=u,g.src=URL.createObjectURL(r)};function A(r){let t,i,s;return{c(){t=U("svg"),i=U("rect"),s=U("rect"),f(i,"width","2.5"),f(i,"height","20"),f(i,"rx","1.25"),f(i,"transform","matrix(-6.33767e-07 1 -1 5.46344e-07 20 8.8042)"),f(s,"width","2.5"),f(s,"height","20"),f(s,"rx","1.25"),f(s,"transform","matrix(-1 -8.02355e-07 -5.46344e-07 -1 11.1611 20)"),f(t,"width","20"),f(t,"height","20"),f(t,"viewBox","0 0 20 20"),f(t,"fill",r[0]),f(t,"xmlns","http://www.w3.org/2000/svg")},m(o,n){O(o,t,n),p(t,i),p(t,s)},p(o,[n]){n&1&&f(t,"fill",o[0])},i:v,o:v,d(o){o&&b(t)}}}function C(r,t,i){let{color:s="var(--color-light)"}=t;return r.$$set=o=>{"color"in o&&i(0,s=o.color)},[s]}class _ extends R{constructor(t){super(),y(this,t,C,A,M,{color:0})}}export{_ as P,j as p};
