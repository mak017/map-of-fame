import{S as le,i as ue,s as fe,I as U,H as S,aC as q,a as A,K as R,b as K,az as y,m as B,ad as Se,a$ as Ae,h as w,g as H,t as $,f as W,aL as Be,b0 as O,ba as ee,l as Q,d as M,T as z,aw as me,bh as te,aJ as Me,E as Ne,M as pe,G as j,b2 as D,b3 as G,b1 as Z,bi as I,aZ as F,aF as Pe,aQ as Fe,bj as Ue,bk as Re,bl as je,bm as De,bn as Ge}from"./index-09f9502f.js";import{f as Y,M as He}from"./Modal-7bbfe9bb.js";import{g as We,A as ce}from"./AutoComplete-2b3eb6d1.js";import{n as Ye}from"./auth-f14ad06a.js";import{t as qe}from"./transformers-2ad5cf36.js";import{B as ze}from"./ButtonModalBack-85c77e60.js";import{B as Je}from"./ButtonPrimary-61920e22.js";import{F as Ke}from"./FormEmailInput-10424246.js";import{F as Oe}from"./FormPasswordInput-2f5cf029.js";import{F as J}from"./FormTextInput-a074be73.js";import"./globals-7f7f1b26.js";import"./endpoints-b6cf54a2.js";import"./SelectIndicatorSvg-a0421dfe.js";import"./each-d91c6e2f.js";function re(r){let e,t;return e=new ze({props:{withTransition:!0}}),e.$on("click",r[17]),{c(){A(e.$$.fragment)},m(o,f){B(e,o,f),t=!0},p:pe,i(o){t||(w(e.$$.fragment,o),t=!0)},o(o){$(e.$$.fragment,o),t=!1},d(o){M(e,o)}}}function ne(r){let e,t,o,f,c,a,g,m,u,E,v,V;function p(n){r[19](n)}let d={placeholder:"Email",errorText:r[1].email};r[2]!==void 0&&(d.value=r[2]),t=new Ke({props:d}),j.push(()=>D(t,"value",p)),t.$on("input",r[20]);function s(n){r[21](n)}let L={placeholder:"Password",autocomplete:"new-password",errorText:r[1].password};r[3]!==void 0&&(L.value=r[3]),c=new Oe({props:L}),j.push(()=>D(c,"value",s)),c.$on("input",r[22]);function b(n){r[23](n)}let h={items:r[13],optionIdentifier:"name",label:"name",placeholder:"Profile Subtype",errorMessage:r[1].userType,showIndicator:!0};return r[4]!==void 0&&(h.selectedValue=r[4]),u=new ce({props:h}),j.push(()=>D(u,"selectedValue",b)),u.$on("select",r[24]),{c(){e=U("div"),A(t.$$.fragment),f=S(),A(c.$$.fragment),g=S(),m=U("div"),A(u.$$.fragment),R(m,"class","profile_subtype")},m(n,l){K(n,e,l),B(t,e,null),y(e,f),B(c,e,null),y(e,g),y(e,m),B(u,m,null),V=!0},p(n,l){const _={};l[0]&2&&(_.errorText=n[1].email),!o&&l[0]&4&&(o=!0,_.value=n[2],G(()=>o=!1)),t.$set(_);const k={};l[0]&2&&(k.errorText=n[1].password),!a&&l[0]&8&&(a=!0,k.value=n[3],G(()=>a=!1)),c.$set(k);const T={};l[0]&2&&(T.errorMessage=n[1].userType),!E&&l[0]&16&&(E=!0,T.selectedValue=n[4],G(()=>E=!1)),u.$set(T)},i(n){V||(w(t.$$.fragment,n),w(c.$$.fragment,n),w(u.$$.fragment,n),n&&(v||O(()=>{v=Z(e,Y,{duration:200}),v.start()})),V=!0)},o(n){$(t.$$.fragment,n),$(c.$$.fragment,n),$(u.$$.fragment,n),V=!1},d(n){n&&Q(e),M(t),M(c),M(u)}}}function se(r){let e,t,o,f,c,a,g,m,u,E,v,V;t=new J({props:{placeholder:"Username",errorText:r[1].username,value:r[5]}}),t.$on("input",r[16]);let p=r[4].name!==I.crew&&ae(r),d=r[4].name!==I.hunter&&oe(r);function s(n){r[29](n)}let L={items:r[11],optionIdentifier:"name",label:"name",placeholder:"Country",errorMessage:r[1].country};r[8]!==void 0&&(L.selectedValue=r[8]),a=new ce({props:L}),j.push(()=>D(a,"selectedValue",s)),a.$on("select",r[30]);function b(n){r[31](n)}let h={placeholder:"Link to Your Portfolio: Like Instagram@",errorText:r[1].link};return r[9]!==void 0&&(h.value=r[9]),u=new J({props:h}),j.push(()=>D(u,"value",b)),u.$on("input",r[32]),{c(){e=U("div"),A(t.$$.fragment),o=S(),p&&p.c(),f=S(),d&&d.c(),c=S(),A(a.$$.fragment),m=S(),A(u.$$.fragment)},m(n,l){K(n,e,l),B(t,e,null),y(e,o),p&&p.m(e,null),y(e,f),d&&d.m(e,null),y(e,c),B(a,e,null),y(e,m),B(u,e,null),V=!0},p(n,l){const _={};l[0]&2&&(_.errorText=n[1].username),l[0]&32&&(_.value=n[5]),t.$set(_),n[4].name!==I.crew?p?(p.p(n,l),l[0]&16&&w(p,1)):(p=ae(n),p.c(),w(p,1),p.m(e,f)):p&&(H(),$(p,1,1,()=>{p=null}),W()),n[4].name!==I.hunter?d?(d.p(n,l),l[0]&16&&w(d,1)):(d=oe(n),d.c(),w(d,1),d.m(e,c)):d&&(H(),$(d,1,1,()=>{d=null}),W());const k={};l[0]&2048&&(k.items=n[11]),l[0]&2&&(k.errorMessage=n[1].country),!g&&l[0]&256&&(g=!0,k.selectedValue=n[8],G(()=>g=!1)),a.$set(k);const T={};l[0]&2&&(T.errorText=n[1].link),!E&&l[0]&512&&(E=!0,T.value=n[9],G(()=>E=!1)),u.$set(T)},i(n){V||(w(t.$$.fragment,n),w(p),w(d),w(a.$$.fragment,n),w(u.$$.fragment,n),n&&(v||O(()=>{v=Z(e,Y,{duration:200}),v.start()})),V=!0)},o(n){$(t.$$.fragment,n),$(p),$(d),$(a.$$.fragment,n),$(u.$$.fragment,n),V=!1},d(n){n&&Q(e),M(t),p&&p.d(),d&&d.d(),M(a),M(u)}}}function ae(r){let e,t,o;function f(a){r[25](a)}let c={placeholder:r[4].name===I.artist?"Artist Name":"Name",errorText:r[1].name};return r[6]!==void 0&&(c.value=r[6]),e=new J({props:c}),j.push(()=>D(e,"value",f)),e.$on("input",r[26]),{c(){A(e.$$.fragment)},m(a,g){B(e,a,g),o=!0},p(a,g){const m={};g[0]&16&&(m.placeholder=a[4].name===I.artist?"Artist Name":"Name"),g[0]&2&&(m.errorText=a[1].name),!t&&g[0]&64&&(t=!0,m.value=a[6],G(()=>t=!1)),e.$set(m)},i(a){o||(w(e.$$.fragment,a),o=!0)},o(a){$(e.$$.fragment,a),o=!1},d(a){M(e,a)}}}function oe(r){let e,t,o;function f(a){r[27](a)}let c={placeholder:"Crew",errorText:r[1].crew};return r[7]!==void 0&&(c.value=r[7]),e=new J({props:c}),j.push(()=>D(e,"value",f)),e.$on("input",r[28]),{c(){A(e.$$.fragment)},m(a,g){B(e,a,g),o=!0},p(a,g){const m={};g[0]&2&&(m.errorText=a[1].crew),!t&&g[0]&128&&(t=!0,m.value=a[7],G(()=>t=!1)),e.$set(m)},i(a){o||(w(e.$$.fragment,a),o=!0)},o(a){$(e.$$.fragment,a),o=!1},d(a){M(e,a)}}}function ie(r){let e,t,o,f,c,a,g;return{c(){e=U("div"),t=U("span"),t.textContent="Have an account?",o=S(),f=U("a"),c=q("Log in"),R(f,"href",a=r[12]("/login")),R(f,"class","svelte-195ewju"),R(e,"class","switch-to-sign-in svelte-195ewju")},m(m,u){K(m,e,u),y(e,t),y(e,o),y(e,f),y(f,c)},p(m,u){u[0]&4096&&a!==(a=m[12]("/login"))&&R(f,"href",a)},i(m){m&&(g||O(()=>{g=Z(e,Y,{duration:200}),g.start()}))},o:pe,d(m){m&&Q(e)}}}function Qe(r){let e,t,o,f,c,a,g,m,u,E,v,V,p,d,s,L,b=r[0]===2&&re(r),h=r[0]===1&&ne(r),n=r[0]===2&&se(r);v=new Je({props:{text:r[0]==1?"Next":"Register",type:"submit",className:"wide",isDisabled:r[10]}});let l=r[0]===1&&ie(r);return{c(){e=U("form"),b&&b.c(),t=S(),o=U("div"),f=q("step "),c=q(r[0]),a=q(" of 2"),g=S(),h&&h.c(),m=S(),n&&n.c(),u=S(),E=U("div"),A(v.$$.fragment),V=S(),l&&l.c(),R(o,"class","step svelte-195ewju"),R(E,"class","submit-wrapper svelte-195ewju"),e.noValidate=!0,R(e,"class","svelte-195ewju")},m(_,k){K(_,e,k),b&&b.m(e,null),y(e,t),y(e,o),y(o,f),y(o,c),y(o,a),y(e,g),h&&h.m(e,null),y(e,m),n&&n.m(e,null),y(e,u),y(e,E),B(v,E,null),y(e,V),l&&l.m(e,null),d=!0,s||(L=Se(e,"submit",Ae(r[14])),s=!0)},p(_,k){_[0]===2?b?(b.p(_,k),k[0]&1&&w(b,1)):(b=re(_),b.c(),w(b,1),b.m(e,t)):b&&(H(),$(b,1,1,()=>{b=null}),W()),(!d||k[0]&1)&&Be(c,_[0]),_[0]===1?h?(h.p(_,k),k[0]&1&&w(h,1)):(h=ne(_),h.c(),w(h,1),h.m(e,m)):h&&(H(),$(h,1,1,()=>{h=null}),W()),_[0]===2?n?(n.p(_,k),k[0]&1&&w(n,1)):(n=se(_),n.c(),w(n,1),n.m(e,u)):n&&(H(),$(n,1,1,()=>{n=null}),W());const T={};k[0]&1&&(T.text=_[0]==1?"Next":"Register"),k[0]&1024&&(T.isDisabled=_[10]),v.$set(T),_[0]===1?l?(l.p(_,k),k[0]&1&&w(l,1)):(l=ie(_),l.c(),w(l,1),l.m(e,null)):l&&(l.d(1),l=null)},i(_){d||(w(b),w(h),w(n),w(v.$$.fragment,_),w(l),O(()=>{d&&(p||(p=ee(e,Y,{duration:200},!0)),p.run(1))}),d=!0)},o(_){$(b),$(h),$(n),$(v.$$.fragment,_),p||(p=ee(e,Y,{duration:200},!1)),p.run(0),d=!1},d(_){_&&Q(e),b&&b.d(),h&&h.d(),n&&n.d(),M(v),l&&l.d(),_&&p&&p.end(),s=!1,L()}}}function Ze(r,e,t){let o,f,c;z(r,me,i=>t(33,o=i)),z(r,te,i=>t(11,f=i)),z(r,Me,i=>t(12,c=i));let a=1,g="",m="",u,E="@",v="",V="",p,d="",s={email:"",password:"",userType:"",username:"",name:"",crew:"",country:"",link:""},L=!1,b=!1;const h=[{id:I.artist.toLowerCase(),name:I.artist},{id:I.crew.toLowerCase(),name:I.crew},{id:I.hunter.toLowerCase(),name:I.hunter}];Ne(()=>{(!f||f.length===0)&&n()});const n=()=>{We().then(i=>{const{success:N,result:P}=i;N&&P&&te.set(qe(P))})},l=i=>i.startsWith("@")?i.substring(1):i,_=()=>{if(a===1){const i=je(g),N=De(m);i&&N&&u?(t(1,s.email="",s),t(1,s.password="",s),t(1,s.userType="",s)):(i?t(1,s.email="",s):t(1,s.email=g?F.emailInvalid:F.emailEmpty,s),N?t(1,s.password="",s):t(1,s.password=m?F.passwordInvalid:F.passwordEmpty,s),t(1,s.userType=u?"":F.profileSubtypeEmpty,s))}else{const i=l(E);Ge(i)?t(1,s.username="",s):t(1,s.username=i?F.usernameInvalid:F.usernameEmpty,s),(u==null?void 0:u.name)!==I.crew?t(1,s.name=v?"":F.nameEmpty,s):t(1,s.crew=V?"":F.crewEmpty,s),t(1,s.country=p?"":F.countryCityEmpty,s)}},k=()=>{_(),a===1?!s.email&&!s.password&&!s.userType&&(t(0,a=2),t(1,s={email:"",password:"",userType:"",username:"",name:"",crew:"",country:"",link:""})):!s.username&&!s.name&&!s.crew&&!s.country&&!s.link&&(t(18,b=!0),Ye({name:v,username:l(E),password:m,email:g,country:p.name,type:u.id,crew:V,link:d}).then(i=>{const{success:N,result:P,errors:C}=i;t(18,b=!1),N&&P?(Pe.set(P),Fe.set(!0),Ue.set(P.isNewbie),Re("token",P.token),o("/")):(C!=null&&C.email&&(t(1,s.email=C.email,s),t(0,a=1)),C!=null&&C.password&&(t(1,s.password=C.password[0],s),t(0,a=1)),Array.isArray(C)&&t(1,s.link=C[0],s),C!=null&&C.username&&Array.isArray(C.username)&&t(1,s.username=C.username[0],s))}).catch(i=>{console.error(i),t(18,b=!1),t(1,s.password="Something went wrong",s)}))},T=i=>{(L||a===1&&(s.email||s.password||s.userType)||a===2&&(s.username||s.name||s.crew||s.country||s.link))&&t(1,s[i]="",s)},_e=i=>{var N,P,C,X,x;if(T("username"),!((C=(P=(N=i==null?void 0:i.detail)==null?void 0:N.target)==null?void 0:P.value)!=null&&C.startsWith("@"))){i.detail.target.value=E;return}t(5,E=(x=(X=i==null?void 0:i.detail)==null?void 0:X.target)==null?void 0:x.value)},de=()=>{t(0,a=1)};function ge(i){g=i,t(2,g)}const we=()=>T("email");function be(i){m=i,t(3,m)}const he=()=>T("password");function ke(i){u=i,t(4,u)}const $e=()=>T("userType");function ve(i){v=i,t(6,v)}const Te=()=>T("name");function ye(i){V=i,t(7,V)}const Ee=()=>T("crew");function Ve(i){p=i,t(8,p)}const Ce=()=>T("country");function Ie(i){d=i,t(9,d)}const Le=()=>T("link");return r.$$.update=()=>{r.$$.dirty[0]&262147&&t(10,L=b||a===1&&(!!s.email||!!s.password||!!s.userType)||a===2&&(!!s.name||!!s.crew||!!s.country||!!s.link))},[a,s,g,m,u,E,v,V,p,d,L,f,c,h,k,T,_e,de,b,ge,we,be,he,ke,$e,ve,Te,ye,Ee,Ve,Ce,Ie,Le]}class Xe extends le{constructor(e){super(),ue(this,e,Ze,Qe,fe,{},null,[-1,-1])}}function xe(r){let e,t;return e=new Xe({}),{c(){A(e.$$.fragment)},m(o,f){B(e,o,f),t=!0},i(o){t||(w(e.$$.fragment,o),t=!0)},o(o){$(e.$$.fragment,o),t=!1},d(o){M(e,o)}}}function et(r){let e,t;return e=new He({props:{id:"registration-modal",title:"Begistration",withFooter:!0,$$slots:{default:[xe]},$$scope:{ctx:r}}}),e.$on("close",r[1]),{c(){A(e.$$.fragment)},m(o,f){B(e,o,f),t=!0},p(o,[f]){const c={};f&4&&(c.$$scope={dirty:f,ctx:o}),e.$set(c)},i(o){t||(w(e.$$.fragment,o),t=!0)},o(o){$(e.$$.fragment,o),t=!1},d(o){M(e,o)}}}function tt(r,e,t){let o;return z(r,me,c=>t(0,o=c)),[o,()=>o("/")]}class gt extends le{constructor(e){super(),ue(this,e,tt,et,fe,{})}}export{gt as default};
